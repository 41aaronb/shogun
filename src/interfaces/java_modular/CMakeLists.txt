include(CommonModularInterface)
include_directories(${CMAKE_SOURCE_DIR}/src)
include_directories(${JNI_INCLUDE_DIRS})

GENERATE_MODULAR_TARGET(java ${CMAKE_CURRENT_SOURCE_DIR} "")

ADD_CUSTOM_COMMAND(TARGET java_modular
				   POST_BUILD
				   COMMAND "${CMAKE_COMMAND}" -E copy_if_different ${CMAKE_CURRENT_SOURCE_DIR}/build.xml ${CMAKE_CURRENT_BINARY_DIR}/build.xml
				   COMMAND "${ANT_EXECUTABLE}" dist
				   COMMENT "Creating shogun.jar")

INSTALL(TARGETS java_modular
	LIBRARY DESTINATION lib/jni
	COMPONENT java)

INSTALL(FILES ${CMAKE_CURRENT_BINARY_DIR}/shogun.jar 
		DESTINATION share/java
		COMPONENT java)

set(CPACK_COMPONENT_JAVA_DISPLAY_NAME "Java interface" PARENT_SCOPE)
set(CPACK_COMPONENT_JAVA_DESCRIPTION "Java modular interface of Shogun" PARENT_SCOPE)
set(CPACK_COMPONENT_JAVA_GROUP "Runtime" PARENT_SCOPE)
set(CPACK_COMPONENT_JAVA_DEPENDS libraries PARENT_SCOPE)
SET(CPACK_COMPONENTS_ALL ${CPACK_COMPONENTS_ALL} java PARENT_SCOPE)
