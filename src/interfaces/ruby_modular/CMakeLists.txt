include(CommonModularInterface)
include_directories(${CMAKE_SOURCE_DIR}/src)
INCLUDE_DIRECTORIES(${RUBY_INCLUDE_DIRS})
INCLUDE_DIRECTORIES(${RUBY_NARRAY_INCLUDE_DIR})

GENERATE_MODULAR_TARGET(ruby ${CMAKE_CURRENT_SOURCE_DIR} ${RUBY_LIBRARY})

EXECUTE_PROCESS(COMMAND ${RUBY_EXECUTABLE} -r rbconfig -e "print RbConfig::CONFIG['sitearchdir']"
		OUTPUT_VARIABLE RUBY_SITE_ARCH_DIR
		ERROR_QUIET)

INSTALL(TARGETS ruby_modular
	LIBRARY DESTINATION ${RUBY_SITE_ARCH_DIR}
	COMPONENT ruby)

set(CPACK_COMPONENT_RUBY_DISPLAY_NAME "Ruby interface" PARENT_SCOPE)
set(CPACK_COMPONENT_RUBY_DESCRIPTION "Ruby modular interface of Shogun" PARENT_SCOPE)
set(CPACK_COMPONENT_RUBY_GROUP "Runtime" PARENT_SCOPE)
set(CPACK_COMPONENT_RUBY_DEPENDS libraries PARENT_SCOPE)
SET(CPACK_COMPONENTS_ALL ${CPACK_COMPONENTS_ALL} ruby PARENT_SCOPE)
