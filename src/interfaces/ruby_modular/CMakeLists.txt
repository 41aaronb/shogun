include(CommonModularInterface)
include_directories(${CMAKE_SOURCE_DIR}/src)
INCLUDE_DIRECTORIES(${RUBY_INCLUDE_DIRS})
INCLUDE_DIRECTORIES(${RUBY_NARRAY_INCLUDE_DIR})

GENERATE_MODULAR_TARGET(ruby ${CMAKE_CURRENT_SOURCE_DIR} ${RUBY_LIBRARY})

EXECUTE_PROCESS(COMMAND ${RUBY_EXECUTABLE} -r rbconfig -e "print Config::CONFIG['sitearchdir']"
		OUTPUT_VARIABLE RUBY_SITE_ARCH_DIR
		ERROR_QUIET)

INSTALL(TARGETS ruby_modular
	LIBRARY DESTINATION ${RUBY_SITE_ARCH_DIR})
