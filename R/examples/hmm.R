library(sg)
library(graph)
library(Rgraphviz)

sg('send_command','loglevel ALL')
#x=c('123456','12434545','3454563465465466564','135145634653256456123645564356156324655634165413')
#x=readLines('dice.txt')
x=readLines('/tmp/cube.txt')
#x=readLines('dat')
#x=c('11111111111111111111111111111111111111126535612365136516235152635612364526345623546625456256345235645625645623456265341111111111111111111111111111111111111111666666666666666666666666666666666666666')
#x=c('1111111111111111111111111111111111111111111111111111111111111111111111111111111666666666666666666666666666666666666666')
sg('set_features','TRAIN',x)
sg('send_command','convert TRAIN STRING CHAR STRING WORD CUBE 1')
sg('send_command','new_hmm 5 6')
sg('send_command','bw')
h=sg('get_hmm')
sg('send_command','best_path 0 1000')

p=exp(h$p)
q=exp(h$q)
a=exp(h$a)
b=exp(h$b)

g=new("graphAM",a>0.1,edgemode = "directed")
plot(g, "neato")
